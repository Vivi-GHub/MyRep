<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Два прогресс-бара с группами изображений</title>
    <style>
        .hidden {
            display: none;
        }

        img {
            height: 170px;
        }

        .images-group {
            margin: 50px 50px 0 50px;
            display: flex;
            gap: 20px;
        }

        .progress-bar {
            height: 20px;
            width: 500px;
            background-color: #01e7f8;
            transform-origin: left;
            transform: scaleX(0);
            transition: transform linear;
            margin: 50px 50px 0 50px;
        }

        .timer {
            margin: 0 50px 50px 50px;
        }
    </style>
</head>

<body>
    <div class="images-group" id="group1-images"></div>
    <div class="progress-block" id="block1">
        <div class="progress-bar" id="progress1"></div>
        <div class="timer" id="timer1">0 с</div>
    </div>
    <div class="images-group" id="group2-images"></div>
    <div class="progress-block" id="block2">
        <div class="progress-bar" id="progress2"></div>
        <div class="timer hidden" id="timer2">0 с</div>
    </div>

    <script>
        function getRandomTime(min = 2000, max = 5000) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function returnURLFirstGroup() {
            const urls = [
                'img/cat1.jpg',
                'img/cat2.jpg',
                'img/cat3.jpg',
            ];
            return Promise.resolve(urls);
        }

        function returnURLSecondGroup() {
            const urls = [
                'img/dog1.jpg',
                'img/dog2.jpg',
                'img/dog3.jpg',
            ];
            return Promise.resolve(urls);
        }

        // Обновление изображений в группе
        function putImagesInGroup(groupId, urls) {
            const container = document.getElementById(groupId);

            urls.forEach(url => {
                const img = document.createElement('img');
                img.setAttribute('src', url);
                container.appendChild(img);
            });
        }

        // Анимация прогресс-бара и таймера
        function runProgressBar(progressId, timerId, time) {
            return new Promise((resolve) => {
                const progressBar = document.getElementById(progressId);
                const timerEl = document.getElementById(timerId);

                timerEl.style.display = 'block';

                let count = 0;

                progressBar.style.transition = `transform ${time}ms linear`;
                progressBar.style.transform = 'scaleX(0)';

                setTimeout(() => {
                    progressBar.style.transform = 'scaleX(1)';
                }, 0);

                const intervalId = setInterval(() => {
                    count++;
                    timerEl.textContent = `${count} с`;
                }, 1000);

                setTimeout(() => {
                    clearInterval(intervalId);
                    resolve();
                }, time);
            });
        }

        // Загрузка блоков с изображениями и прогресс-барами
        async function loadGroups() {

            const time1 = getRandomTime();
            await runProgressBar('progress1', 'timer1', time1);

            const urls1 = await returnURLFirstGroup();
            putImagesInGroup('group1-images', urls1);


            const time2 = getRandomTime();
            await runProgressBar('progress2', 'timer2', time2);

            const urls2 = await returnURLSecondGroup();
            putImagesInGroup('group2-images', urls2);
        }

        window.addEventListener('load', () => {
            loadGroups();
        });
    </script>

</body>

</html>